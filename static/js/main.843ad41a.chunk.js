(this["webpackJsonpreact-form-builder"]=this["webpackJsonpreact-form-builder"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),o=n.n(c),l=(n(14),n(3)),i=n(2),u=n(4),s=n(1),d=n(7),m=n.n(d),v=r.a.createContext(),p=r.a.createContext(),b={label:null,required:!1,type:"text"},E={label:null,type:"title"},h={controls:[Object(s.a)({},E)]},f=function(){return JSON.parse(JSON.stringify(h))},y={title:"Untitled form",sectionIndex:0,hasChanges:!1,sections:[Object(s.a)({},f())]},x=m()((function(e,t){return fetch("http://amazon.co.uk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(){return t({type:"setValue",key:"hasChanges",value:!1})})).catch((function(e){console.error(e)}))}),5e3),O=function(e,t){switch(t.type){case"setValue":var n=t.value,a=t.key;if(void 0===n||!a)throw new Error("setValue must be called with a value and key. You provided value: ".concat(n,", key: ").concat(a));return Object(s.a)({},e,Object(u.a)({},a,n));case"addNewSection":var r=e.sections;return Object(s.a)({},e,{sectionIndex:r.length,sections:[].concat(Object(i.a)(r),[Object(s.a)({},f())]),hasChanges:!0});case"deleteSection":var c=e.sections,o=e.sectionIndex;return 0===c.length?(console.warn("Cannot remove your last section. Aborting..."),e):(c.splice(o,1),Object(s.a)({},e,{sectionIndex:0===o?0:e.sectionIndex-1,sections:c,hasChanges:!0}));case"switchToNextSection":return Object(s.a)({},e,{sectionIndex:e.sectionIndex+1});case"switchToPreviousSection":return Object(s.a)({},e,{sectionIndex:e.sectionIndex-1});case"addNewInputField":var l=e.sectionIndex,d=Object(i.a)(e.sections),m=d[l];return m.controls=[].concat(Object(i.a)(m.controls),[Object(s.a)({},b)]),Object(s.a)({},e,{sections:Object(i.a)(d),hasChanges:!0});case"addNewStaticField":var v=e.sectionIndex,p=Object(i.a)(e.sections),h=p[v];return h.controls=[].concat(Object(i.a)(h.controls),[Object(s.a)({},E)]),Object(s.a)({},e,{sections:Object(i.a)(p),hasChanges:!0});case"editFieldValue":var y=e.sectionIndex,x=t.value,O=t.index,w=t.key,j=e.sections[y],g=Object(i.a)(j.controls);if(!j||!g||!g[O])throw new Error("Section or control specified does not appear to exist. Section: ".concat(j,", controls: ").concat(g));if(void 0===x||void 0===O||!w)throw new Error("editFieldValue must be called with a value, key and index. You provided value: ".concat(x,", key: ").concat(w,", index: ").concat(O));return g[O][w]=x,Object(s.a)({},e,{sections:Object(i.a)(e.sections),hasChanges:!0});case"deleteControl":var C=e.sectionIndex,N=t.index;return e.sections[C].controls.splice(N,1),Object(s.a)({},e,{sections:Object(i.a)(e.sections),hasChanges:!0});default:throw new Error("Unhandled action type ".concat(t.type))}},w=function(e){var t=e.children,n=Object(a.useReducer)(O,y),c=Object(l.a)(n,2),o=c[0],i=c[1];return o.hasChanges&&x(o,i),r.a.createElement(v.Provider,{value:o},r.a.createElement(p.Provider,{value:i},t))},j=function(){var e=r.a.useContext(v);if(void 0===e)throw new Error("useFormState must be used within FormProvider");return e},g=function(){var e=r.a.useContext(p);if(void 0===e)throw new Error("useFormState must be used within FormProvider");return e},C=function(){return[j(),g()]},N=function(){var e=C(),t=Object(l.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{id:"form-name-section"},r.a.createElement("input",{type:"text",onChange:function(e){return a({type:"setValue",key:"title",value:e.target.value})},value:n.title,id:"form-name"}),r.a.createElement("label",{htmlFor:"form-name"},r.a.createElement("i",{className:"fa fa-edit icon"}),r.a.createElement("span",{className:"hide"},"Edit Form Name")))},k=n(8),F=function(){var e=g();return r.a.createElement("button",{onClick:function(){return e({type:"addNewInputField"})}},"Add field")},I=function(e){var t=e.label,n=e.index,a=e.type,c=g();return r.a.createElement("div",{className:"edit-mode"},r.a.createElement("input",{type:"text",onChange:function(e){return c({type:"editFieldValue",value:e.target.value,key:"label",index:n})},placeholder:"Header...",value:t}),r.a.createElement("div",{className:"type"},r.a.createElement("select",{onChange:function(e){return c({type:"editFieldValue",index:n,key:"type",value:e.target.value})},value:a},r.a.createElement("option",{value:"text"},"Text input"),r.a.createElement("option",{value:"number"},"Number input"),r.a.createElement("option",{value:"title"},"Title"))),r.a.createElement("div",{className:"remove"},r.a.createElement("button",{onClick:function(){return c({type:"deleteControl",index:n})}},"Delete")))},S=function(e){var t=e.type,n=e.index,a=e.label,c=e.required,o=g();return r.a.createElement("div",{className:"edit-mode"},r.a.createElement("label",null,r.a.createElement("input",{onChange:function(e){return o({type:"editFieldValue",index:n,key:"label",value:e.target.value})},type:"text",value:a})),r.a.createElement("div",{className:"required"},r.a.createElement("label",null,"Required Field",r.a.createElement("input",{type:"checkbox",checked:c,onChange:function(){return o({type:"editFieldValue",index:n,key:"required",value:!c})}}))),r.a.createElement("div",{className:"type"},r.a.createElement("select",{onChange:function(e){return o({type:"editFieldValue",index:n,key:"type",value:e.target.value})},value:t},r.a.createElement("option",{value:"text"},"Text input"),r.a.createElement("option",{value:"number"},"Number input"),r.a.createElement("option",{value:"title"},"Title"))),r.a.createElement("div",{className:"remove"},r.a.createElement("button",{onClick:function(){return o({type:"deleteControl",index:n})}},"Delete")))},T=function(e){return r.a.createElement("div",{className:"edit-mode"},"title"===e.type?r.a.createElement(I,e):r.a.createElement(S,e))},V={text:function(e){var t=e.label,n=e.required;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,t,n&&r.a.createElement("span",{className:"error"},"*")),r.a.createElement("input",{type:"text"}))},number:function(e){var t=e.label,n=e.required;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,t,n&&r.a.createElement("span",{className:"error"},"*")),r.a.createElement("input",{type:"number"}))},title:function(e){var t=e.label;return r.a.createElement("div",{className:"display-mode"},r.a.createElement("h3",null,t))}},q=function(e){var t=e.type,n=Object(k.a)(e,["type"]),a=V[t];if(!a)throw new Error("Unsupported control type ".concat(t));return r.a.createElement("div",{className:"display-mode"},r.a.createElement(a,n))},P=function(e){var t=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),o=Object(l.a)(c,2),i=o[0],u=o[1];return{isInFocus:n,onBlur:Object(a.useCallback)((function(){var e=setTimeout((function(){return r(!1)}));u(e)}),[u,r]),onFocus:Object(a.useCallback)((function(){clearTimeout(i),r(!0)}),[i,r])}}(),n=t.isInFocus,c=t.onBlur,o=t.onFocus;return r.a.createElement("div",{className:"field",onBlur:c,onFocus:o,tabIndex:"0"},n?r.a.createElement(T,e):r.a.createElement(q,e))},B=function(e){var t=e.controls;return 0===t.length?null:r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement(P,Object.assign({},e,{index:t,key:t}))})))},J=function(){var e=j(),t=e.sectionIndex,n=e.sections[t];if(!n)throw new Error("No data found for requested section at index ".concat(t));return r.a.createElement(B,{controls:n.controls})},A=function(){var e=C(),t=Object(l.a)(e,2),n=t[0],a=t[1],c=n.sectionIndex,o=n.sections.length;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return a({type:"addNewSection"})}},"Add new section"),o>1&&0!==c&&r.a.createElement("button",{onClick:function(){return a({type:"switchToPreviousSection"})}},"To Section ",c-1),o>1&&c!==o-1&&r.a.createElement("button",{onClick:function(){return a({type:"switchToNextSection"})}},"To Section ",c+1),o>1&&r.a.createElement("button",{onClick:function(){return a({type:"deleteSection"})}},"Delete this section"))},D=(n(16),function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement("h1",null,"Chameleon Form Builder")),r.a.createElement("div",{className:"content"},r.a.createElement(w,null,r.a.createElement(N,null),r.a.createElement(A,null),r.a.createElement(J,null),r.a.createElement(F,null))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,n){e.exports=n(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.843ad41a.chunk.js.map