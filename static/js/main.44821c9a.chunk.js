(this["webpackJsonpreact-form-builder"]=this["webpackJsonpreact-form-builder"]||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(6),l=a.n(r),o=(a(14),a(2)),i=a(3),s=a(4),u=a(1),m=a(7),d=a.n(m),v=c.a.createContext(),f=c.a.createContext(),E={label:"Type your question",required:!1,type:"text"},p={label:"Type your heading",type:"title"},b={sectionName:"Unnamed section",controls:[Object(u.a)({},p)]},h=function(){return JSON.parse(JSON.stringify(b))},y={title:"Untitled form",sectionIndex:0,hasChanges:!1,successfulSave:!1,sections:[Object(u.a)({},h())]},N=d()((function(e,t){return fetch("http://amazon.co.uk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(){return t({type:"setValue",key:"hasChanges",value:!1})})).catch((function(e){t({type:"setValue",key:"hasChanges",value:!1}),t({type:"setSuccessfulSave",value:!0}),console.error(e)}))}),5e3),x=function(e,t){switch(t.type){case"setValue":var a=t.value,n=t.key;if(void 0===a||!n)throw new Error("setValue must be called with a value and key. You provided value: ".concat(a,", key: ").concat(n));return Object(u.a)({},e,Object(s.a)({},n,a));case"changeSectionName":var c=t.value,r=e.sectionIndex;return e.sections[r].sectionName=c,Object(u.a)({},e);case"addNewSection":var l=e.sections;return Object(u.a)({},e,{sectionIndex:l.length,sections:[].concat(Object(i.a)(l),[Object(u.a)({},h())]),hasChanges:!0});case"deleteSection":var o=e.sections,m=e.sectionIndex;return 0===o.length?(console.warn("Cannot remove your last section. Aborting..."),e):(o.splice(m,1),Object(u.a)({},e,{sectionIndex:0===m?0:e.sectionIndex-1,sections:o,hasChanges:!0}));case"switchToNextSection":return Object(u.a)({},e,{sectionIndex:e.sectionIndex+1});case"switchToPreviousSection":return Object(u.a)({},e,{sectionIndex:e.sectionIndex-1});case"addNewInputField":var d=e.sectionIndex,v=Object(i.a)(e.sections),f=v[d];return f.controls=[].concat(Object(i.a)(f.controls),[Object(u.a)({},E)]),Object(u.a)({},e,{sections:Object(i.a)(v),hasChanges:!0});case"addNewStaticField":var b=e.sectionIndex,y=Object(i.a)(e.sections),N=y[b];return N.controls=[].concat(Object(i.a)(N.controls),[Object(u.a)({},p)]),Object(u.a)({},e,{sections:Object(i.a)(y),hasChanges:!0});case"editFieldValue":var x=e.sectionIndex,g=t.value,O=t.index,j=t.key,w=e.sections[x],C=Object(i.a)(w.controls);if(!w||!C||!C[O])throw new Error("Section or control specified does not appear to exist. Section: ".concat(w,", controls: ").concat(C));if(void 0===g||void 0===O||!j)throw new Error("editFieldValue must be called with a value, key and index. You provided value: ".concat(g,", key: ").concat(j,", index: ").concat(O));return C[O][j]=g,Object(u.a)({},e,{sections:Object(i.a)(e.sections),hasChanges:!0});case"deleteControl":var k=e.sectionIndex,S=t.index;return e.sections[k].controls.splice(S,1),Object(u.a)({},e,{sections:Object(i.a)(e.sections),hasChanges:!0});case"setSuccessfulSave":var F=t.value;return Object(u.a)({},e,{successfulSave:F});default:throw new Error("Unhandled action type ".concat(t.type))}},g=function(e){var t=e.children,a=Object(n.useReducer)(x,y),r=Object(o.a)(a,2),l=r[0],i=r[1];return l.hasChanges&&N(l,i),c.a.createElement(v.Provider,{value:l},c.a.createElement(f.Provider,{value:i},t))},O=function(){var e=c.a.useContext(v);if(void 0===e)throw new Error("useFormState must be used within FormProvider");return e},j=function(){var e=c.a.useContext(f);if(void 0===e)throw new Error("useFormState must be used within FormProvider");return e},w=function(){return[O(),j()]},C=function(){var e=w(),t=Object(o.a)(e,2),a=t[0],r=t[1],l=a.successfulSave;return Object(n.useEffect)((function(){l&&setTimeout((function(){r({type:"setSuccessfulSave",value:!1})}),3e3)}),[l,r]),l?c.a.createElement("div",{className:"save-message"},"All changes saved"):null},k=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(),l=Object(o.a)(r,2),i=l[0],s=l[1];return{isInFocus:a,onBlur:Object(n.useCallback)((function(){var e=setTimeout((function(){return c(!1)}));s(e)}),[s,c]),onFocus:Object(n.useCallback)((function(){clearTimeout(i),c(!0)}),[i,c])}},S=function(){var e=w(),t=Object(o.a)(e,2),a=t[0],n=t[1],r=k(),l=r.isInFocus,i=r.onFocus,s=r.onBlur;return c.a.createElement("div",{id:"form-name-section",onFocus:i,onBlur:s},c.a.createElement("input",{className:l?null:"default",type:"text",onChange:function(e){return n({type:"setValue",key:"title",value:e.target.value})},value:a.title,id:"form-name"}),c.a.createElement(C,null))},F=a(8),I=function(){var e=j();return c.a.createElement("div",{className:"add-button"},c.a.createElement("button",{onClick:function(){return e({type:"addNewInputField"})}},c.a.createElement("i",{className:"fa fa-plus icon"}),c.a.createElement("span",null," Add a control ")))},T=function(e){var t=e.label,a=e.index,n=e.type,r=j();return c.a.createElement("div",{className:"edit-mode"},c.a.createElement("input",{type:"text",onChange:function(e){return r({type:"editFieldValue",value:e.target.value,key:"label",index:a})},placeholder:"Header...",value:t}),c.a.createElement("div",{className:"editable-functions"},c.a.createElement("div",{className:"type"},c.a.createElement("select",{onChange:function(e){return r({type:"editFieldValue",index:a,key:"type",value:e.target.value})},value:n},c.a.createElement("option",{value:"text"},"Text input"),c.a.createElement("option",{value:"number"},"Number input"),c.a.createElement("option",{value:"title"},"Title"))),c.a.createElement("div",{className:"float-right"},c.a.createElement("div",{className:"copy"},c.a.createElement("i",{className:"fa fa-copy icon"})),c.a.createElement("div",{className:"remove"},c.a.createElement("button",{onClick:function(){return r({type:"deleteControl",index:a})}},c.a.createElement("i",{className:"fa fa-trash icon"}))))))},V=function(e){var t=e.type,a=e.index,n=e.label,r=e.required,l=j();return c.a.createElement("div",{className:"edit-mode"},c.a.createElement("label",null,c.a.createElement("input",{onChange:function(e){return l({type:"editFieldValue",index:a,key:"label",value:e.target.value})},type:"text",value:n})),c.a.createElement("div",{className:"editable-functions"},c.a.createElement("div",{className:"type"},c.a.createElement("select",{onChange:function(e){return l({type:"editFieldValue",index:a,key:"type",value:e.target.value})},value:t},c.a.createElement("option",{value:"text"},"Text input"),c.a.createElement("option",{value:"number"},"Number input"),c.a.createElement("option",{value:"title"},"Title"))),c.a.createElement("div",{className:"float-right"},c.a.createElement("div",{className:"required"},c.a.createElement("input",{id:"toggle",type:"checkbox",checked:r,onChange:function(){return l({type:"editFieldValue",index:a,key:"required",value:!r})}}),c.a.createElement("label",{for:"toggle"},"Required")),c.a.createElement("div",{className:"copy"},c.a.createElement("i",{className:"fa fa-copy icon"})),c.a.createElement("div",{className:"remove"},c.a.createElement("button",{onClick:function(){return l({type:"deleteControl",index:a})}},c.a.createElement("i",{className:"fa fa-trash icon"}))))))},B=function(e){return c.a.createElement("div",{className:"edit-mode"},"title"===e.type?c.a.createElement(T,e):c.a.createElement(V,e))},q={text:function(e){var t=e.label,a=e.required;return c.a.createElement(c.a.Fragment,null,c.a.createElement("label",null,t,a&&c.a.createElement("span",{className:"error"},"REQUIRED")),c.a.createElement("input",{type:"text"}))},number:function(e){var t=e.label,a=e.required;return c.a.createElement(c.a.Fragment,null,c.a.createElement("label",null,t,a&&c.a.createElement("span",{className:"error"},"REQUIRED")),c.a.createElement("input",{type:"number"}))},title:function(e){var t=e.label;return c.a.createElement("div",{className:"display-mode"},c.a.createElement("h3",null,t))}},P=function(e){var t=e.type,a=Object(F.a)(e,["type"]),n=q[t];if(!n)throw new Error("Unsupported control type ".concat(t));return c.a.createElement("div",{className:"display-mode"},c.a.createElement(n,a))},R=function(e){var t=k(),a=t.isInFocus,n=t.onBlur,r=t.onFocus;return c.a.createElement("div",{className:"field",onBlur:n,onFocus:r,tabIndex:"0"},a?c.a.createElement(B,e):c.a.createElement(P,e))},U=function(e){var t=e.controls;return 0===t.length?null:c.a.createElement("div",null,t.map((function(e,t){return c.a.createElement(R,Object.assign({},e,{index:t,key:t}))})))},J=function(){var e=O(),t=e.sectionIndex,a=e.sections[t];if(!a)throw new Error("No data found for requested section at index ".concat(t));return c.a.createElement(U,{controls:a.controls})},A=function(){var e=w(),t=Object(o.a)(e,2),a=t[0],n=a.sections,r=a.sectionIndex,l=t[1],i=k(),s=i.isInFocus,u=i.onFocus,m=i.onBlur,d=n[r].sectionName;return c.a.createElement("div",{className:"name-section",onFocus:u,onBlur:m},c.a.createElement("input",{className:s?null:"default",type:"text",onChange:function(e){return l({type:"changeSectionName",value:e.target.value})},value:d}))},D=function(){var e=w(),t=Object(o.a)(e,2),a=t[0],n=t[1],r=a.sectionIndex,l=a.sections.length;return c.a.createElement("div",{className:"section-buttons"},c.a.createElement("div",{className:"row"},c.a.createElement("button",{onClick:function(){return n({type:"switchToPreviousSection"})},disabled:l<1||0===r},c.a.createElement("i",{className:"fa fa-arrow-left"})),c.a.createElement("button",{onClick:function(){return n({type:"switchToNextSection"})},disabled:l<1||r===l-1},c.a.createElement("i",{className:"fa fa-arrow-right"}))),c.a.createElement("div",{className:"row"},c.a.createElement("button",{onClick:function(){return n({type:"addNewSection"})}},c.a.createElement("i",{className:"fa fa-plus icon"})),c.a.createElement("button",{onClick:function(){return n({type:"deleteSection"})},disabled:l<=1},c.a.createElement("i",{className:"fa fa-trash icon"}))))},Q=function(){var e=O(),t=e.sections,a=e.sectionIndex;return c.a.createElement("div",{className:"section-title"},c.a.createElement("div",{className:"current-section"},"Section ",a+1," / ",t.length),c.a.createElement(A,null),c.a.createElement(D,null))},W=(a(16),function(){return c.a.createElement("div",{className:"App"},c.a.createElement("header",null,c.a.createElement("h1",null,"Chameleon Form Builder")),c.a.createElement("div",{className:"content"},c.a.createElement(g,null,c.a.createElement(S,null),c.a.createElement(Q,null),c.a.createElement("div",{className:"section"},c.a.createElement(J,null),c.a.createElement(I,null)))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,a){e.exports=a(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.44821c9a.chunk.js.map